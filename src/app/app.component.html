<link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.grey-red.min.css">
<script src="/node_modules/material-design-lite/material.min.js"></script>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<ng-progress [thick]="true" color="red" [spinner]="false"></ng-progress>
<nav class="navbar sticky-top navbar-expand-md navbar-dark">
  <a class="navbar-brand">
    <button type="button" class="btn btn-success" style="display: inline" (click)="isSidebarCollapsed = !isSidebarCollapsed"
      *ngIf="isLoggedIn() && !isSideBarCollapsed">
      <<</button>

    <!-- This is a temp fix...I will make it one image soon! -->
    <div class="d-inline" [routerLink]="['/home']">
      <h4 class="font-weight-bold text-light d-inline">Mi</h4>
      <img class="text-light" src="favicon.ico" width="30" height="30" />
      <h4 class="font-weight-bold text-light d-inline">Tape</h4>
    </div>
  </a>
  <button class="navbar-toggler hidden-sm-up" type="button" (click)="isNavbarCollapsed = !isNavbarCollapsed" aria-controls="navbarSupportedContent"
    [attr.aria-expanded]="isNavbarCollapsed" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div [ngbCollapse]="isNavbarCollapsed" class="collapse navbar-collapse" id="navbarSupportedContent">
    <input class="nav-item form-control md-input" [value]="searchValue" (input)="searchValue = $event.target.value" type="text"
      placeholder="Search..." (ngEnter)="search()" *ngIf="this.isLoggedIn()" />

    <div class="nav-item" *ngIf="this.selectedPlaylist && this.isLoggedIn()">
      <img class='icon icon-middle icon-md float-left' src="assets/playlist/last_song.png" placement="bottom" ngbTooltip="Last Song" (click)='this.YT.lastSong()' />
      <img class="icon icon-middle icon-md" [src]="this.YT.paused ? 'assets/playlist/play_button.png' : 'assets/playlist/pause_button.png'"
        (click)="this.YT.pauseClicked()" placement="bottom" ngbTooltip="Pause/Play"/>
      <img class='icon icon-middle icon-md' src="assets/playlist/next_song.png" placement="bottom" ngbTooltip="Next Song" (click)='this.YT.nextSong()' />
      <img class="icon icon-middle icon-md" [src]="this.YT.repeat ? 'assets/playlist/repeat_song_on.png' : 'assets/playlist/repeat_song_off.png'"
      placement="bottom" ngbTooltip="Repeat" (click)="this.YT.repeatClicked()" />

      <button type="button" class="btn btn-success icon-middle" (click)="enablePlaylist()" *ngIf="!this.showPlaylist">Show Playlist</button>
      <button type="button" class="btn btn-success icon-middle" (click)="search()" *ngIf="this.showPlaylist">Show Page</button>
    </div>

    <div class="nav-item" class="ml-auto no-padding" *ngIf="this.isLoggedIn()">
      <h6 class="font-weight-bold text-light" *ngIf="this.getUser()">{{this.getUser().username}}</h6>
    </div>

    <div ngbDropdown placement="bottom" class="nav-item">
      <img ngbDropdownToggle class="icon icon-middle icon-md" src="assets/shared/profile_white.png" />
      <div ngbDropdownMenu>
        <div *ngIf="this.isLoggedIn()">
          <button class="dropdown-item" [routerLink]="['/profile']">Profile</button>
          <button class="dropdown-item" [routerLink]="['/login']" (click)="this.logOut()">Logout</button>
        </div>
        <div *ngIf="!this.isLoggedIn()">
          <button class="dropdown-item" [routerLink]="['/login']">Login</button>
        </div>
      </div>
    </div>

  </div>
</nav>

<div class="main-container container-fluid">
  <div class="row" *ngIf="!this.isLoggedIn()">
    <div class="col-12">
      <login></login>
    </div>
  </div>

  <div class="row" *ngIf="this.isLoggedIn()">

    <div class="col-sm-2 shadow no-padding" *ngIf="!isSidebarCollapsed">
      <app-sidebar (playlist)="selectPlaylist($event)" *ngIf="this.getUser()"></app-sidebar>
    </div>

    <div class="col-sm-10 margin-top margin-bottom">
      <div class="col-sm-6 no-padding mx-auto shadow">
        <app-youtube [playlist]="this.selectedPlaylist" [showPlaylist]="this.showPlaylist"></app-youtube>
      </div>
      <!--<router-outlet class="col-12 margin-top mx-auto" *ngIf="!this.showPlaylist"></router-outlet>-->
      <!--Add this once we figure out how to send @Input() with router links! -->
      <div class="col-sm-7 margin-top mx-auto" style="margin-top: 5%" *ngIf="!this.showPlaylist">
        <home [searchString]="this.searchString"></home>
      </div>
    </div>
  </div>
</div>